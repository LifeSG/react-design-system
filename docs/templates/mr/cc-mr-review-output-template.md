# Merge Request Review Output Template

This template defines the structure for merge request review reports generated by the cc-review-mr prompt.

## File Naming Convention

`MR-REVIEW-<feature-branch-name>-<date>.md`

-   Replace slashes in branch name with hyphens
-   Use ISO date format (YYYY-MM-DD)
-   Example: `MR-REVIEW-feature-user-validation-2025-10-01.md`

## File Location

-   If `reviews/` directory exists: `reviews/MR-REVIEW-<feature-branch-name>-<date>.md`
-   Otherwise: Repository root `MR-REVIEW-<feature-branch-name>-<date>.md`

## Complete Review File Structure

```markdown
# Merge Request Review: <Feature Branch Name>

**Review Date**: <current-date>
**Reviewer**: GitHub Copilot (AI-Assisted Review)
**Feature Branch**: `<branch-name>`
**Base Branch**: `<base-branch>`

---

## Executive Summary

### Quality Rating: ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê (X/5)

### Recommendation: **[APPROVE / APPROVE WITH MINOR IMPROVEMENTS / REQUEST CHANGES / NEEDS DISCUSSION]**

[2-3 paragraph summary of what this MR implements, overall quality assessment, and context]

**Strengths**:

-   [Key strength 1]
-   [Key strength 2]
-   [Key strength 3]
-   [Additional strengths as bullet points]

**Areas for Improvement**:

-   **[Category]**: [Brief description]
-   **[Category]**: [Brief description]
-   **[Category]**: [Brief description]

---

## Summary

Provide a high-level assessment of the MR:

-   Overall quality rating (Excellent / Good / Needs Improvement / Major Issues)
-   Key strengths of the implementation
-   Critical issues that must be addressed
-   Recommendation: Approve / Request Changes / Needs Discussion

## Change Overview

### Branch Information

-   Feature Branch: `<branch-name>`
-   Base Branch: `<base-branch>`
-   Comparison: `<base-branch>...<feature-branch>`

### Files Changed

#### New Files

1. `path/to/new-file.ts` (+XXX lines) - [Brief description]
2. `path/to/another-file.ts` (+XXX lines) - [Brief description]

#### Modified Files

1. `path/to/modified-file.ts` (+X lines, -Y lines) - [Brief description]
2. `path/to/another-modified.ts` (+X lines, -Y lines) - [Brief description]

#### Renamed Files

1. `old-name.ts` ‚Üí `new-name.ts` (XX% similarity) - [Brief description]

#### Deleted Files

1. `path/to/deleted-file.ts` (-XXX lines) - [Reason for deletion]

**Summary Table** (from `git diff --name-status`):
```

M src/api/user-service.ts - Enhanced user validation
A src/utils/email-validator.ts - New email validation utility
D src/legacy/old-validator.ts - Removed deprecated validator
R src/old.ts ‚Üí src/new.ts - Renamed for clarity

````

### Significant Changes

For each major modification, document based on git diff output:

**File**: `path/to/file.ts`
**Git Status**: M (Modified) / A (Added) / D (Deleted) / R (Renamed)
**Lines Changed**: +X -Y (from git diff stat)
**Diff Hunks**: @@ -45,10 +45,15 @@ (line ranges from diff headers)
**Description**: What changed and why
**Previous Behavior**: What the code did before (from - lines in diff)
**New Behavior**: What the code does now (from + lines in diff)
**Impact**: Components or functionality affected by this change

## Security Analysis (MANDATORY)

**Overall Security Rating**: SECURE / NEEDS IMPROVEMENT / INSECURE / REQUIRES EXPERT REVIEW

**Security Issues Summary**:
- Critical: X issues found
- High: Y issues found
- Medium: Z issues found
- Low: N issues found

**Blocking Issues**: [Yes/No - list critical/high issues]

### OWASP Top 10 Assessment

For EACH of the OWASP Top 10 categories:

#### 1. Broken Access Control
**Status**: PASS / CONCERNS / FAIL / NOT APPLICABLE
**Findings**: [Specific findings for this MR]
**Files Reviewed**: [List of files checked]
**Recommendations**: [Specific actions if issues found]

[Repeat for all 10 OWASP categories]

### Security Vulnerabilities Found

List ALL security issues discovered, grouped by severity:

#### CRITICAL Severity (Must Fix Before Merge)

1. **üî¥ CRITICAL-SEC-01: [Vulnerability Name]**
   - **File**: `path/to/file.ts:line_number`
   - **OWASP Category**: [Category]
   - **Severity**: CRITICAL
   - **Vulnerability**: [Description]
   - **Risk**: [Impact description]
   - **Evidence**:
     ```[language]
     [vulnerable code snippet]
     ```
   - **Recommendation**: [Fix description]
     ```[language]
     [secure code example]
     ```

#### HIGH Severity (Should Fix Before Merge)

1. **üü° HIGH-SEC-02: [Vulnerability Name]**
   - **File**: `path/to/file.ts:line_number`
   - **OWASP Category**: [Category]
   - **Severity**: HIGH
   - **Issue**: [Description]
   - **Recommendation**: [Fix description with code examples]

#### MEDIUM Severity (Should Address Soon)

1. **üü¢ MEDIUM-SEC-03: [Issue Name]**
   - **File**: `path/to/file.ts:line_number`
   - **OWASP Category**: [Category]
   - **Severity**: MEDIUM
   - **Issue**: [Description]
   - **Recommendation**: [Fix description]

#### LOW Severity (Improvement Recommended)

1. **üîµ LOW-SEC-04: [Issue Name]**
   - **File**: `path/to/file.ts:line_number`
   - **OWASP Category**: [Category]
   - **Severity**: LOW
   - **Issue**: [Description]
   - **Recommendation**: [Improvement suggestion]

### Security Strengths

1. **‚úÖ [Security Practice]**: [Description]
   ```[language]
   [code example demonstrating good practice]
````

2. **‚úÖ [Another Security Practice]**: [Description]

### Data Flow and Trust Boundary Analysis

**User Input Entry Points**: [List all places where user data enters the system]

**Trust Boundaries Crossed**: [Identify where data crosses security boundaries]

**Validation Points**: [Where is data validated?]

**Data Flow Diagram** (text-based):

```
User Input ‚Üí [Validation?] ‚Üí Controller ‚Üí [Auth Check?] ‚Üí Service ‚Üí [Sanitization?] ‚Üí Database
```

**Security Gaps Identified**: [List gaps in the data flow]

### Security Recommendations

#### Immediate Actions Required

1. [Specific, actionable recommendation with priority]
2. [Another recommendation]

#### Short-term Improvements

1. [Recommendations for near-term fixes]

#### Long-term Security Enhancements

1. [Strategic recommendations]

#### Security Testing Recommendations

1. [Specific security tests to add]

### Security Analysis Summary

| Severity | Count | MUST Fix Before Merge |
| -------- | ----- | --------------------- |
| CRITICAL | X     | [Yes/No - details]    |
| HIGH     | Y     | [Yes/No - details]    |
| MEDIUM   | Z     | [Recommended]         |
| LOW      | N     | [Optional]            |

**Overall Security Assessment**: [PASS / PASS WITH CONDITIONS / FAIL / REQUIRES EXPERT REVIEW]

-   [List critical actions required]
-   [Additional recommendations]

---

**Security Review Certification**: This MR has been reviewed against OWASP Top 10 and common vulnerability patterns. [Date: YYYY-MM-DD]

## Code Quality Analysis

### Critical Issues

[List any critical non-security issues that MUST block merge]

**[CRITICAL]** **[Category]** Issue description

-   File: `path/to/file.ts:line_number`
-   Impact: [Description]
-   Recommendation: [Fix]

### Major Concerns

[List significant issues that should be addressed]

**‚ö†Ô∏è MAJOR-01: [Issue Title]**
**Files**: [List of affected files]
**Impact**: [High/Medium/Low] - [Description]

**Issue**: [Detailed description with code examples if relevant]

**Concerns**:

1. [Specific concern]
2. [Another concern]

**Recommendation**:

1. [Actionable recommendation]
2. [Another recommendation]

### Minor Issues

[List minor improvements and suggestions]

**‚ÑπÔ∏è MINOR-01: [Issue Title]**
**File**: `path/to/file.ts:line_number`
**Impact**: [Low] - [Description]

**Issue**: [Description]

**Recommendation**: [Suggestion]

---

## Testing Evaluation

### Test Coverage: ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê [Rating]

#### Test Statistics

-   **Test File Size**: [XXX lines]
-   **Test Suites**: [N describe blocks]
-   **Test Cases**: [N+ test scenarios]
-   **Coverage Areas**:
    -   ‚úÖ [Coverage area 1]
    -   ‚úÖ [Coverage area 2]
    -   ‚ö†Ô∏è [Missing coverage area]

#### Test Quality Strengths

1. **[Strength Category]**: [Description]

    ```[language]
    [code example demonstrating good testing practice]
    ```

2. **[Another Strength]**: [Description]

#### Test Quality Concerns

**üîç GAP-01: [Missing Test Coverage]**
**Severity**: [High/Medium/Low]

[Description of what's missing and why it matters]

**Recommendation**:

```[language]
[example test case that should be added]
```

### Test Structure Quality

‚úÖ **[Quality aspect]**: [Description]
‚úÖ **[Another aspect]**: [Description]
‚ö†Ô∏è **[Concern]**: [Description]

---

## Documentation Assessment

### Enhancement Proposal Quality: ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê [Rating]

(If EP present, otherwise omit this section)

#### Strengths

1. **[Aspect]**: [Description]
2. **[Another aspect]**: [Description]

#### Gaps

1. **[Missing element]**: [Description]

---

## Architecture & Design

### Architectural Strengths

**[Architecture Pattern Name]**:

```
[ASCII diagram or description of architecture]
```

**Evaluation**: [Assessment of the architecture]

-   ‚úÖ [Positive aspect]
-   ‚úÖ [Another positive]
-   ‚ö†Ô∏è [Concern if any]

### Design Concerns

**‚ö†Ô∏è DESIGN-01: [Design Issue]**
**File**: `path/to/file.ts`

**Issue**: [Description]

**Recommendation**: [Suggestion]

### Alignment with Best Practices

| Practice                    | Status  | Evidence      |
| --------------------------- | ------- | ------------- |
| SOLID Principles            | [‚úÖ/‚ö†Ô∏è] | [Description] |
| DRY (Don't Repeat Yourself) | [‚úÖ/‚ö†Ô∏è] | [Description] |
| KISS (Keep It Simple)       | [‚úÖ/‚ö†Ô∏è] | [Description] |
| Dependency Injection        | [‚úÖ/‚ö†Ô∏è] | [Description] |
| Error Handling              | [‚úÖ/‚ö†Ô∏è] | [Description] |

---

## Critical Issues (Blocking)

List issues that MUST be resolved before merge:

**[CRITICAL]** **[Category]** Issue description

-   File: `path/to/file.ts:line_number`
-   Impact: [High/Medium/Low]
-   Recommendation: Specific actionable fix

## Major Concerns (High Priority)

List significant issues that should be addressed:

**[MAJOR]** **[Category]** Issue description

-   File: `path/to/file.ts:line_number`
-   Impact: [High/Medium/Low]
-   Suggestion: Specific improvement recommendation

## Minor Issues (Optional)

List minor improvements and best practice suggestions:

**[MINOR]** **[Category]** Suggestion

-   File: `path/to/file.ts:line_number`
-   Benefit: Why this improvement matters

## Positive Observations

Highlight good practices and excellent implementation details:

1. **[POSITIVE]** **[Category]** Positive aspect

    - Example: Specific code or approach that demonstrates quality
    - Why it matters: [Explanation]

2. **[POSITIVE]** **[Category]** Another positive aspect
    ```[language]
    [code example demonstrating excellence]
    ```

## Questions for Discussion

List items requiring clarification or team discussion:

-   Question 1
-   Question 2

## Acceptance Criteria Verification

(If EP present, otherwise omit this section)

**AC1**: [Description from EP]

-   Status: Met / Not Met / Partially Met
-   Evidence: File references and implementation details
-   Concerns: Any gaps or issues

## Recommendations Summary

### Must Fix Before Merge (HIGH Priority)

1. **[ISSUE-ID]**: [Brief description]

    - Action: [Specific action required]
    - Impact: [Why this is critical]

2. **[ISSUE-ID]**: [Brief description]
    - Action: [Specific action required]

### Should Fix Soon (MEDIUM Priority)

3. **[ISSUE-ID]**: [Brief description]

    - Action: [Specific action required]

4. **[ISSUE-ID]**: [Brief description]
    - Action: [Specific action required]

### Recommended Improvements (LOW Priority)

5. **[ISSUE-ID]**: [Brief description]
6. **[ISSUE-ID]**: [Brief description]

---

## Conclusion

[2-3 paragraph conclusion summarizing the overall assessment]

### Approval Conditions

**[APPROVE / APPROVE WITH CONDITIONS / REQUEST CHANGES]** provided the following are addressed:

**Before Merge**:

1. ‚úÖ [Critical action 1]
2. ‚úÖ [Critical action 2]
3. ‚úÖ [Critical action 3]

**Post-Merge Follow-up**:

1. [Action to address after merge]
2. [Another follow-up action]

### Overall Assessment

**Quality Score**: X/5 ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê

**Breakdown**:

-   **Code Quality**: X/5 - [Brief assessment]
-   **Security**: X/5 - [Brief assessment]
-   **Testing**: X/5 - [Brief assessment]
-   **Documentation**: X/5 - [Brief assessment]
-   **Architecture**: X/5 - [Brief assessment]

**Final Recommendation**: **[APPROVE / APPROVE WITH MINOR IMPROVEMENTS / REQUEST CHANGES / NEEDS DISCUSSION]**

---

## Review Metadata

**Commit Range**: `<base-branch>...<feature-branch>`
**Files Analyzed**: [N]
**Enhancement Proposal**: [EP file name if applicable]
**Test Coverage**: [XXX lines of tests / X% coverage]
**Security Analysis**: OWASP Top 10 compliance reviewed
**Review Date**: [YYYY-MM-DD]
**Review Duration**: [Estimate if applicable]

---

## Review Completion Checklist

### Code Analysis

-   [ ] All changed files analyzed
-   [ ] Code quality and maintainability assessed
-   [ ] Breaking changes identified
-   [ ] Performance impact assessed

### Security Verification (MANDATORY)

-   [ ] OWASP Top 10 checklist completed for all changes
-   [ ] Authentication and authorization verified
-   [ ] Input validation and sanitization checked
-   [ ] Injection vulnerabilities assessed (SQL, XSS, Command)
-   [ ] Secrets and credentials management verified
-   [ ] Cryptographic implementations reviewed
-   [ ] Access control mechanisms validated
-   [ ] Security headers and configurations checked
-   [ ] Error handling verified (no sensitive data leakage)
-   [ ] Dependency vulnerabilities checked
-   [ ] Data flow and trust boundaries analyzed
-   [ ] Technology-specific security patterns verified

### Testing & Documentation

-   [ ] Test coverage verified
-   [ ] Security test cases reviewed
-   [ ] Documentation reviewed and accurate
-   [ ] Security considerations documented

---

_This review was conducted following [organization] standards with focus on security (OWASP Top 10), architecture, testing, and maintainability._

**Note**: This review was generated using AI assistance. Please verify critical findings and use human judgment for final decisions.

```

## Console Output Format

Display ONLY task completion status in console:

```

# Merge Request Review Completed

Review File: <file-path>

Quality Rating: ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê (X/5)
Recommendation: [APPROVE / APPROVE WITH MINOR IMPROVEMENTS / REQUEST CHANGES]

## Issue Summary:

Security Issues:

-   Critical: X
-   High: Y
-   Medium: Z
-   Low: N

Code Quality:

-   Critical: X
-   Major: Y
-   Minor: Z

Testing: [Excellent / Good / Needs Improvement]
Architecture: [Excellent / Good / Concerns]

Overall Security Assessment: [PASS / PASS WITH CONDITIONS / FAIL]

Actions Required Before Merge: [N items]

Please review the detailed analysis in the generated file.

```

<!-- This is copy of the master file in the ccube-lib-ai-config repo. Update the files there. -->
```
