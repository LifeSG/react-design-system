import { Canvas, Meta, Source, Story, Preview } from "@storybook/addon-docs";
import { Layout, NotificationBanner, Text } from "src/components";
import { HOCElement, HoldingContainer, SampleContent } from "./doc-elements";
import { PreviewBox } from "../../common/components";

<Meta title="modules/NotificationBanner" />

# Notification Banner

A component that remains sticky at the top of the page and provides the user of important notification or notices.

<Canvas>
    <Story name="NotificationBanner">
        <HoldingContainer>
            <NotificationBanner.Base>
                This is a notification banner that can be dismissed by default.
            </NotificationBanner.Base>
            <SampleContent />
        </HoldingContainer>
    </Story>
</Canvas>

### Usage with links

You can also add items like links by simply using the `NotificationBanner.Label` component.

> Note: You will need to use the `NotificationBanner.Link` if you require the external icon

<Preview>
    <HoldingContainer>
        <NotificationBanner.Base>
            <NotificationBanner.Label>
                This is a notification banner that can be dismissed by
                default.&nbsp;
                <NotificationBanner.Link
                    href="https://www.tech.gov.sg"
                    target="_blank"
                    external
                >
                    Click here
                </NotificationBanner.Link>
                &nbsp;to access an external link. Else&nbsp;
                <a href="https://www.life.gov.sg" target="_blank">
                    click here
                </a>
                &nbsp;for an internal one. <strong>Bold text</strong>
                &nbsp;or&nbsp;<em>italicised text</em>&nbsp;are also accepted.
            </NotificationBanner.Label>
        </NotificationBanner.Base>
        <SampleContent short />
    </HoldingContainer>
</Preview>

### Non sticky notification banner

In some cases where you do not wish for the notification banner to remain sticky even on scroll, you can do so by setting the `sticky` prop to `false`.

<Preview>
    <HoldingContainer>
        <NotificationBanner.Base sticky={false}>
            This is a non-sticky notification banner.
        </NotificationBanner.Base>
        <SampleContent short />
    </HoldingContainer>
</Preview>

## Props

The component also inherits the [HTMLElement](https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement).

Custom props for this component are as such:

| Name            |                                          Description                                           | Default |
| --------------- | :--------------------------------------------------------------------------------------------: | ------: |
| **dismissible** |            Indicates if the `NotificationBanner` can be dismissed. <br />`boolean`             |  `true` |
| **visible**     |             Indicates the visibility of the `NotificationBanner`. <br />`boolean`              |  `true` |
| **sticky**      | Indicates the if the `NotificationBanner` should remain sticky even on scroll. <br />`boolean` |  `true` |
| **onDismiss**   |              The callback when the dismiss button is clicked. <br />`() => void`               |       - |

### `NotificationBanner.Label` props

The component inherits the [Text](/docs/elements-text-introduction--page) component props.

### `NotificationBanner.Link` props

The component inherits the [Text](/docs/elements-text-introduction--page) component props.

## Using as a Higher Order Component (HOC)

In some cases when the content comes from a backend server or external source, you might need to be able to
render the contents of the `NotificationBanner`. You can simply do so by specifying

```tsx
export const HOCElement = withNotificationBanner(data);
```

### Example

<PreviewBox>
    <HoldingContainer>
        <HOCElement dismissible={false} />
        <SampleContent short />
    </HoldingContainer>
</PreviewBox>

```tsx
export const HOCElement = withNotificationBanner([
    {
        type: "text",
        content: "This is rendered using the HOC, and it contains a&nbsp;",
    },
    {
        type: "link",
        content: "hyperlink",
        otherAttributes: {
            href: "https://www.google.com",
            external: true,
            target: "_blank",
        },
    },
    {
        type: "text",
        content:
            "&nbsp;and text of styles like <strong>bold</strong> and <em>italics</em>.",
    },
]);

<HOCElement dismissible={false} />;
```

You can also make use of the `NotificationBanner` props on the higher order component.

### HOC Parameters

The parameters consist of a data array that consists of attributes. The `NotificationBanner` renders the array inline
within the component.

```tsx
withNotificationBanner(data: NotificationContentAttributes[])
```

### NotificationContentAttributes

| Property            |                                                       Type                                                       |                   Description                    |
| ------------------- | :--------------------------------------------------------------------------------------------------------------: | :----------------------------------------------: |
| **type**`*`         |                                                  `text`, `link`                                                  |        The type of component to render in        |
| **content**`*`      |                                                     `string`                                                     | This can be pure text or with HTML markup syntax |
| **otherAttributes** | [TextLinkProps](/docs/elements-text-introduction--page)<br />[TextProps](/docs/elements-text-introduction--page) | Additional attributes of the rendered component  |
