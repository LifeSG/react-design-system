import { Canvas, Meta, Story, Preview } from "@storybook/addon-docs";
import { PopoverDisplay, PopoverHOCExample } from "./doc-elements";

<Meta title="modules/Popover" />

# Popover

A component which appears when hovering or clicking on a target element and displays information about a certain element in the page.

It is recommended to use this if you have more content to display within the popover bubble. If the content is short, consider using the [Tooltip](/story/modules-tooltip--page) instead.

<PopoverDisplay />

<br />

> **Note:** A position offset is automatically applied based on the position of the `Popover` in
> the viewport. This prevents the content of the `Popover` from being cut off from the display

## Usage

To use the `Popover`, you can make use of the `withPopover` higher order component (HOC) to do so. Here is how you can set it up.

### Step 1: Create the component that indicates the trigger for the `Popover`

> Note: The HOC contains a trigger already so everything here is **purely cosmetic**

```tsx
const TriggerComponent = () => <div>Click me</div>;
```

### Step 2: Add the trigger component to the `withPopover` HOC function

You will also need to specify the `Popover` [options](#options).

```tsx
const PopoverHOC = withPopover(TriggerComponent, {
    content: "This is the content that will appear in the popover",
    id: "popover",
});
```

### Step 3: Compose the page/component that uses the HOC

```tsx
export const Display = () => {
    return (
        <Container>
            <PopoverHOC />
        </Container>
    );
};
```

## Props

The Popover HOC combines the trigger component props with a set of injected ones. The injected props include:

| Name                 |                         Description                         | Default |
| -------------------- | :---------------------------------------------------------: | ------: |
| **onPopoverAppear**  |  The callback when the **Popover** appears<br />`function`  |       - |
| **onPopoverDismiss** | The callback when the **Popover** dismisses<br />`function` |       - |

## Options

These are the available options you can pass to the `withPopover` HOC function.

| Name            |                              Description                               | Default |
| --------------- | :--------------------------------------------------------------------: | ------: |
| **content**`*`  |       The content of the **Popover**<br />`string` `JSX.Element`       |       - |
| **trigger**     | The trigger for the appearance of the **Popover**<br />`click` `hover` | `click` |
| **id**          |                The id of the **Popover**<br />`string`                 |       - |
| **data-testid** |              The test id of the **Popover**<br />`string`              |       - |

## Behaviour

There are a few points to take note on the behaviour of the `Popover`

-   It appears as a full screen modal in the mobile view
-   When in mobile view, clicking on the cross or outside of the modal will automatically dismiss the `Popover`
