import { Canvas, Meta, Story } from "@storybook/addon-docs";
import { DataTable } from "src/data-table";
import {
    Heading3,
    Secondary,
    StoryContainer,
    Title,
} from "../storybook-common";
import { PropsTable } from "./props-table";
import { useState } from "react";

<Meta title="Modules/DataTable" component={DataTable} />

<Title>Data Table</Title>

<Secondary>Overview</Secondary>

A call to action component with an icon in it.

```tsx
import { DataTable } from "@lifesg/react-design-system/data-table";
```

<Canvas>
    <Story name="DataTable">
        <DataTable
            headers={[
                {
                    fieldKey: "status",
                    label: "Status",
                    style: { width: "7.5rem" },
                },
                {
                    fieldKey: "time",
                    label: "Time",
                    style: { width: "15rem" },
                },
                {
                    fieldKey: "resource",
                    label: "Resource",
                    style: { width: "17.5rem" },
                },
                { fieldKey: "title", label: "Title" },
            ]}
            rows={[
                {
                    id: "status",
                    status: "Completed",
                    time: "07/Aug/2023 9.30pm",
                    resource: "Test",
                    title: "Titile 1",
                    fieldKey: "status",
                    label: "Status",
                },
                {
                    id: "bookingTime",
                    status: "Pending",
                    time: "07/Aug/2023 10.30pm",
                    resource: "Test",
                    title: "Titile 2",
                    fieldKey: "bookingTime",
                    label: "Booking time",
                },
            ]}
            loadState={false}
        />
    </Story>
</Canvas>

<Heading3>Sorting Indicator</Heading3>

Show sorting Indicator Table header.

<Canvas>
    <Story name="Sorting Indicator">
        <DataTable
            headers={[
                {
                    fieldKey: "status",
                    label: "Status",
                    style: { width: "7.5rem" },
                    clickable: true,
                },
                {
                    fieldKey: "time",
                    label: "Time",
                    style: { width: "15rem" },
                    clickable: true,
                },
                {
                    fieldKey: "resource",
                    label: "Resource",
                    style: { width: "17.5rem" },
                    clickable: true,
                },
                { fieldKey: "title", label: "Title", clickable: true },
            ]}
            rows={[
                {
                    id: "status",
                    status: "Completed",
                    time: "07/Aug/2023 9.30pm",
                    resource: "Test",
                    title: "Titile 1",
                    fieldKey: "status",
                    label: "Status",
                },
                {
                    id: "bookingTime",
                    status: "Pending",
                    time: "07/Aug/2023 10.30pm",
                    resource: "Test",
                    title: "Titile 2",
                    fieldKey: "bookingTime",
                    label: "Booking time",
                },
            ]}
            loadState={false}
            sortIndicators={{
                ["status"]: "desc",
                ["time"]: "desc",
                ["resource"]: "asc",
                ["title"]: "asc",
            }}
        />
    </Story>
</Canvas>

<Heading3>Checkbox selection</Heading3>

Table Row with checkbox selection.

<Canvas>
    <Story name="Checkbox selection">
        {() => {
            const [selected, setSelected] = useState([]);
            const handleOnClickSelect = (rowId, isSelected) => {
                console.log("isSelected :", isSelected);
                if (isSelected) {
                    setSelected((selected) => [...selected, rowId]);
                } else {
                    setSelected(
                        selected.filter((item) => {
                            return item !== rowId;
                        })
                    );
                }
            };
            const handleOnClickSelectAll = (select) => {
                console.log("select :", select);
            };
            return (
                <DataTable
                    headers={[
                        {
                            fieldKey: "status",
                            label: "Status",
                            style: { width: "7.5rem" },
                            clickable: true,
                        },
                        {
                            fieldKey: "time",
                            label: "Time",
                            style: { width: "15rem" },
                            clickable: true,
                        },
                        {
                            fieldKey: "resource",
                            label: "Resource",
                            style: { width: "17.5rem" },
                            clickable: true,
                        },
                        { fieldKey: "title", label: "Title", clickable: true },
                    ]}
                    rows={[
                        {
                            id: "status",
                            status: "Completed",
                            time: "07/Aug/2023 9.30pm",
                            resource: "Test",
                            title: "Titile 1",
                            fieldKey: "status",
                            label: "Status",
                        },
                        {
                            id: "bookingTime",
                            status: "Pending",
                            time: "07/Aug/2023 10.30pm",
                            resource: "Test",
                            title: "Titile 2",
                            fieldKey: "bookingTime",
                            label: "Booking time",
                        },
                        {
                            id: "commonRow",
                            status: "Common",
                            time: "07/Aug/2023 11.30pm",
                            resource: "Test",
                            title: "Titile 3",
                            fieldKey: "commonRow",
                            label: "Common Row",
                        },
                    ]}
                    selection={selected}
                    loadState={false}
                    selectionConfig={{
                        showCheckboxes: true,
                        showHeaderCheckbox: true,
                        headerWidth: "5rem",
                        onClickSelect: (fieldKey, rowId, isSelected) => {
                            handleOnClickSelect(rowId, isSelected);
                        },
                    }}
                />
            );
        }}
    </Story>
</Canvas>

<Heading3>Alternating Rows</Heading3>

Table Alternating Row.

<Canvas>
    <Story name="Alternating Rows">
        {() => {
            const [selected, setSelected] = useState();
            return (
                <DataTable
                    headers={[
                        {
                            fieldKey: "status",
                            label: "Status",
                            style: { width: "7.5rem" },
                        },
                        {
                            fieldKey: "time",
                            label: "Time",
                            style: { width: "15rem" },
                        },
                        {
                            fieldKey: "resource",
                            label: "Resource",
                            style: { width: "17.5rem" },
                        },
                        { fieldKey: "title", label: "Title" },
                    ]}
                    rows={[
                        {
                            id: "status",
                            status: "Completed",
                            time: "07/Aug/2023 9.30pm",
                            resource: "Test",
                            title: "Titile 1",
                            fieldKey: "status",
                            label: "Status",
                        },
                        {
                            id: "bookingTime",
                            status: "Pending",
                            time: "07/Aug/2023 10.30pm",
                            resource: "Test",
                            title: "Titile 2",
                            fieldKey: "bookingTime",
                            label: "Booking time",
                        },
                        {
                            id: "commonRow",
                            status: "Common",
                            time: "07/Aug/2023 11.30pm",
                            resource: "Test",
                            title: "Titile 3",
                            fieldKey: "commonRow",
                            label: "Common Row",
                        },
                        {
                            id: "sampleRow",
                            status: "SampleRow",
                            time: "07/Aug/2023 12.30pm",
                            resource: "Test",
                            title: "Titile 4",
                            fieldKey: "sampleRow",
                            label: "sample Row",
                        },
                        {
                            id: "checkRow",
                            status: "CheckRow",
                            time: "07/Aug/2023 1.30pm",
                            resource: "Test",
                            title: "Titile 5",
                            fieldKey: "checkRow",
                            label: "check Row",
                        },
                    ]}
                    loadState={false}
                    sortIndicators={{ fieldKey: "ASC" }}
                    alternatingRows={true}
                />
            );
        }}
    </Story>
</Canvas>

<Heading3>Empty Data View</Heading3>

Table Empty Data View.

<Canvas>
    <Story name="Empty Data View">
        <DataTable
            headers={[
                {
                    fieldKey: "status",
                    label: "Status",
                    style: { width: "15rem" },
                },
                {
                    fieldKey: "time",
                    label: "Time",
                    style: { width: "15rem" },
                },
                {
                    fieldKey: "resource",
                    label: "Resource",
                    style: { width: "15rem" },
                },
                { fieldKey: "title", label: "Title" },
            ]}
            rows={[]}
            loadState={false}
            selectionConfig={{
                showCheckboxes: false,
                showHeaderCheckbox: true,
                headerWidth: "5rem",
            }}
        />
    </Story>
</Canvas>

<Heading3>Data Loading View</Heading3>

Table Empty Data View.

<Canvas>
    <Story name="Data Loading View">
        <DataTable
            headers={[
                {
                    fieldKey: "status",
                    label: "Status",
                    style: { width: "15rem" },
                },
                {
                    fieldKey: "time",
                    label: "Time",
                    style: { width: "15rem" },
                },
                {
                    fieldKey: "resource",
                    label: "Resource",
                    style: { width: "15rem" },
                },
                { fieldKey: "title", label: "Title" },
            ]}
            rows={[]}
            loadState={true}
            selectionConfig={{
                showCheckboxes: false,
                showHeaderCheckbox: true,
                headerWidth: "5rem",
            }}
        />
    </Story>
</Canvas>

<Secondary>Component API</Secondary>

<PropsTable />
