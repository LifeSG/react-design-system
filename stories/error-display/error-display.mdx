import { Canvas, Meta, Story } from "@storybook/addon-docs";
import { useState } from "react";
import { Alert } from "src/alert";
import { Text } from "src/text";
import { ErrorDisplay } from "src/error-display";
import {
    Heading3,
    Heading4,
    PreviewBox,
    Secondary,
    StoryContainer,
    Title,
} from "../storybook-common";
import { PropsTable } from "./props-table";

<Meta title="Modules/ErrorDisplay" component={ErrorDisplay} />

<Title>ErrorDisplay</Title>

<Secondary>Overview</Secondary>

A component that displays an error or issue that has occurred.

```tsx
import { ErrorDisplay } from "@lifesg/react-design-system/error-display";
```

<Canvas>
    <Story name="ErrorDisplay">
        <ErrorDisplay type="404" />
    </Story>
</Canvas>

<Secondary>Other usages</Secondary>

<Heading3>With action button</Heading3>

You can also add an action button to be present in the `ErrorDisplay`. The action button will
appear at the bottom of the component.

<Canvas>
    <Story name="With action button">
        <ErrorDisplay
            type="unsupported-browser"
            actionButton={{
                children: "Continue anyway",
                onClick: () => {
                    alert("Clicked on continue button");
                },
            }}
        />
    </Story>
</Canvas>

<Heading3>With custom attributes</Heading3>

Some variants of the `ErrorDisplay` accept custom attributes to alter the text content with
dynamic variables. Currently only the types `"maintenance"` and `"inactivity"` have such a support.

<Heading4>Maintenance</Heading4>

<Canvas>
    <Story name="Custom attributes - Maintenance">
        <ErrorDisplay
            type="maintenance"
            additionalProps={{ dateString: "1 January 2023, 8:00am" }}
        />
        <br />
    </Story>
</Canvas>

<Heading4>Inactivity</Heading4>

<Canvas>
    <Story name="Custom attributes - Inactivity">
        <ErrorDisplay
            type="inactivity"
            additionalProps={{ secondsLeft: 300 }}
        />
        <br />
    </Story>
</Canvas>

<Heading3>Customisation</Heading3>

The `ErrorDisplay` component is customisable according to your project's needs. Customisation includes

-   image
-   title
-   description

<Canvas>
    <Story name="Custom error">
        <ErrorDisplay
            type="404"
            title="My Custom 404"
            description={
                <>
                    You can pass a <strong>JSX component</strong> here as well
                </>
            }
        />
    </Story>
</Canvas>

If you require customisations down to the style, you can use the relevant `data-id` properties of each element.

| Element     | Data id                       |
| ----------- | ----------------------------- |
| image       | `"error-display-image"`       |
| title       | `"error-display-title"`       |
| description | `"error-display-description"` |

> **Note**: For the title and description, you will need to use the `!important` flag when modifying the size, line height and letter spacing

```tsx
// If you are using Styled Components

export const CustomErrorDisplay = styled(ErrorDisplay)`
    [data-id="error-display-image"] {
        /* Your styles here */
    }
`;
```

<Secondary>Variants</Secondary>

> **Note**: Switch to the Canvas tab and use the Controls add-on to view the different error types

<Canvas>
    <Story
        name="Variants"
        parameters={{
            controls: {
                disabled: false,
                include: ["type", "illustrationScheme"],
            },
        }}
        argTypes={{
            type: {
                defaultValue: "400",
            },
            illustrationScheme: {
                control: "select",
                defaultValue: undefined,
                options: ["base", "bookingsg", "rbs", undefined],
            },
        }}
    >
        {(args) => {
            return <ErrorDisplay {...args} />;
        }}
    </Story>
</Canvas>

<Secondary>Component API</Secondary>

<PropsTable />
