import { Canvas, Meta, Story } from "@storybook/addon-docs";
import { useState } from "react";
import {
    Heading3,
    Heading4,
    PreviewBox,
    Secondary,
    StoryContainer,
    Title,
} from "../storybook-common";
import { FileUpload } from "src/file-upload";
import { SimpleIdGenerator } from "src/util/simple-id-generator";

<Meta title="Modules/FileUpload" component={FileUpload} />

<Title>FileUpload</Title>

<Secondary>Overview</Secondary>

A component that allows for uploading files.

```tsx
import { FileUpload } from "@lifesg/react-design-system/file-upload";
```

<Canvas>
    <Story name="FileUpload">
        {() => {
            const [fileItems, setFileItems] = useState([]);
            const handleChange = (files) => {
                const newFileItems = files.map((file) => {
                    return {
                        id: SimpleIdGenerator.generate(),
                        name: file.name,
                        size: file.size,
                        type: file.type,
                    };
                });
                setFileItems((prevItems) => {
                    return prevItems.concat(newFileItems);
                });
            };
            const handleDelete = (fileItem) => {
                const newArr = [...fileItems];
                newArr.splice(newArr.indexOf(fileItem), 1);
                setFileItems(newArr);
            };
            return (
                <FileUpload
                    fileItems={fileItems}
                    onChange={handleChange}
                    onDelete={handleDelete}
                    title="Content title"
                    description="Additional description for the user to consider when uploading their files."
                    warning={
                        <>
                            Maximum size per file: 2 MB
                            <br />
                            Supported file types: .JPG, .JPEG, .PNG
                        </>
                    }
                />
            );
        }}
    </Story>
</Canvas>
