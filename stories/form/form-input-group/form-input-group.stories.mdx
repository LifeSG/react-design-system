import { MagnifierIcon } from "@lifesg/react-icons/magnifier";
import { Canvas, Meta, Preview, Story } from "@storybook/addon-docs";
import { useState } from "react";
import { InputGroup } from "src/input-group";
import { Form } from "src/form";
import { Text } from "src/text";
import {
    Heading3,
    Heading4,
    Secondary,
    StoryContainer,
    Title,
} from "../../storybook-common";
import { Container } from "../shared-doc-elements";
import { PropsTable } from "./props-table";

<Meta title="Form/InputGroup" component={Form.InputGroup} />

<Title>Form.InputGroup</Title>

<Secondary>Overview</Secondary>

An enhanced field that allows a user to enter a response and display extra information.

```tsx
import { Form } from "@lifesg/react-design-system/form";
```

<Canvas>
    <Story name="InputGroup">
        <StoryContainer>
            <Container>
                <Form.InputGroup
                    label="This is the field group"
                    placeholder="Enter an amount"
                    addon={{
                        attributes: {
                            value: "$",
                        },
                    }}
                />
                <Form.InputGroup
                    label="This is the disabled state"
                    placeholder="Enter an amount"
                    addon={{
                        attributes: {
                            value: "$",
                        },
                    }}
                    disabled
                />
                <Form.InputGroup
                    label="This is the readonly state"
                    placeholder="Enter an amount"
                    addon={{
                        attributes: {
                            value: "$",
                        },
                    }}
                    readOnly
                />
                <Form.InputGroup
                    label="This is the error state"
                    placeholder="Enter an amount"
                    addon={{
                        attributes: {
                            value: "$",
                        },
                    }}
                    errorMessage="Input is required"
                />
            </Container>
        </StoryContainer>
    </Story>
</Canvas>

<Heading3>Addon variants</Heading3>

You are able to specify attributes in the `addon` property to construct advanced `InputGroup` components.

<Preview>
    <Story name="With different addons">
        <StoryContainer>
            <Container>
                <Text.H3>Static addon</Text.H3>
                <br />
                <Form.InputGroup
                    label="With a static addon"
                    placeholder="Enter an amount"
                    addon={{
                        attributes: {
                            value: "$",
                        },
                    }}
                />
                <Form.InputGroup
                    label="With a static addon on the right"
                    placeholder="Enter an amount"
                    addon={{
                        position: "right",
                        attributes: {
                            value: "kg",
                        },
                    }}
                />
                <Text.H3>List addon</Text.H3>
                <br />
                <Form.InputGroup
                    label="With a list addon"
                    placeholder="Enter something"
                    addon={{
                        type: "list",
                        attributes: {
                            placeholder: "Select",
                            type: "list",
                            options: [
                                { value: "SG", display: "Singapore" },
                                { value: "US", display: "United States" },
                                { value: "UK", display: "United Kingdom" },
                                { value: "JP", display: "Japan" },
                            ],
                            valueExtractor: (option) => option.value,
                            listExtractor: (option) => option.display,
                        },
                    }}
                />
                <Form.InputGroup
                    label="This is the list addon readonly state (pristine)"
                    placeholder="Enter something"
                    addon={{
                        type: "list",
                        attributes: {
                            placeholder: "Select",
                            type: "list",
                            options: [
                                { value: "SG", display: "Singapore" },
                                { value: "US", display: "United States" },
                                { value: "UK", display: "United Kingdom" },
                                { value: "JP", display: "Japan" },
                            ],
                            valueExtractor: (option) => option.value,
                            listExtractor: (option) => option.display,
                        },
                    }}
                    readOnly
                />
                <Form.InputGroup
                    label="This is the list addon readonly state (selected)"
                    placeholder="Enter something"
                    addon={{
                        type: "list",
                        attributes: {
                            placeholder: "Select",
                            type: "list",
                            options: [
                                { value: "SG", display: "Singapore" },
                                { value: "US", display: "United States" },
                                { value: "UK", display: "United Kingdom" },
                                { value: "JP", display: "Japan" },
                            ],
                            valueExtractor: (option) => option.value,
                            listExtractor: (option) => option.display,
                            value: {
                                value: "SG",
                                display: "Singapore",
                            },
                        },
                    }}
                    value="Some value"
                    readOnly
                />
                <Form.InputGroup
                    label="This is the list addon disabled state"
                    placeholder="Enter something"
                    addon={{
                        type: "list",
                        attributes: {
                            placeholder: "Select",
                            type: "list",
                            options: [
                                { value: "SG", display: "Singapore" },
                                { value: "US", display: "United States" },
                                { value: "UK", display: "United Kingdom" },
                                { value: "JP", display: "Japan" },
                            ],
                            valueExtractor: (option) => option.value,
                            listExtractor: (option) => option.display,
                            value: {
                                value: "SG",
                                display: "Singapore",
                            },
                        },
                    }}
                    disabled
                />
                <Form.InputGroup
                    label="This is the list addon error state"
                    placeholder="Enter something"
                    addon={{
                        type: "list",
                        attributes: {
                            placeholder: "Select",
                            type: "list",
                            options: [
                                { value: "SG", display: "Singapore" },
                                { value: "US", display: "United States" },
                                { value: "UK", display: "United Kingdom" },
                                { value: "JP", display: "Japan" },
                            ],
                            valueExtractor: (option) => option.value,
                            listExtractor: (option) => option.display,
                            value: {
                                value: "SG",
                                display: "Singapore",
                            },
                        },
                    }}
                    error
                />
                <Form.InputGroup
                    label="With a list addon on the right"
                    placeholder="Enter something"
                    addon={{
                        type: "list",
                        attributes: {
                            placeholder: "Select",
                            type: "list",
                            options: [
                                { value: "SG", display: "Singapore" },
                                { value: "US", display: "United States" },
                                { value: "UK", display: "United Kingdom" },
                                { value: "JP", display: "Japan" },
                            ],
                            valueExtractor: (option) => option.value,
                            listExtractor: (option) => option.display,
                        },
                        position: "right",
                    }}
                />
                <Text.H3>Custom addon</Text.H3>
                <br />
                <Form.InputGroup
                    label="With a custom addon"
                    placeholder="Enter something"
                    addon={{
                        type: "custom",
                        attributes: {
                            children: <MagnifierIcon />,
                        },
                    }}
                />
                <Form.InputGroup
                    label="With a custom addon on the right"
                    placeholder="Enter something"
                    addon={{
                        type: "custom",
                        attributes: {
                            children: <MagnifierIcon />,
                        },
                        position: "right",
                    }}
                />
            </Container>
        </StoryContainer>
    </Story>
</Preview>

<Heading3>Using the field as a standalone</Heading3>

In the case that you require the input group field as a standalone, you can do this.

```tsx
import { InputGroup } from "@lifesg/react-design-system/input-group";
```

<Preview>
    <Story name="Standalone usage">
        <StoryContainer>
            <Container>
                <InputGroup
                    placeholder="Enter an amount"
                    addon={{
                        attributes: {
                            value: "$",
                        },
                    }}
                />
            </Container>
        </StoryContainer>
    </Story>
</Preview>

<Secondary>Component API</Secondary>

<PropsTable />
