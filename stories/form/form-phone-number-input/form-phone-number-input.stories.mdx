import { Canvas, Meta, Preview, Story } from "@storybook/addon-docs";
import { useState } from "react";
import { PhoneNumberInput } from "src/phone-number-input";
import { Form } from "src/form";
import {
    Heading3,
    Heading4,
    Secondary,
    StoryContainer,
    Title,
} from "../../storybook-common";
import { Container } from "../shared-doc-elements";
import { PropsTable } from "./props-table";

<Meta title="Form/PhoneNumberInput" component={Form.PhoneNumberInput} />

<Title>Form.PhoneNumberInput</Title>

<Secondary>Overview</Secondary>

The field that allows a user to enter a phone number value.

```tsx
import { Form } from "@lifesg/react-design-system/form";
```

**Important note**: This component currently does not do phone number value validation

<Canvas>
    <Story name="Phone Number Input">
        {() => {
            const [value1, setValue1] = useState({
                number: "",
                countryCode: "",
            });
            const [value2, setValue2] = useState({
                number: "",
                countryCode: "+60",
            });
            const handlClear1 = () => {
                setValue1((prevState) => {
                    return { ...prevState, number: "" };
                });
            };
            const handlClear2 = () => {
                setValue2((prevState) => {
                    return { ...prevState, number: "" };
                });
            };
            return (
                <StoryContainer>
                    <Container>
                        <Form.PhoneNumberInput
                            label="This is the default state"
                            placeholder="Enter phone number"
                            allowClear={true}
                            value={value1}
                            onClear={handlClear1}
                        />
                        <Form.PhoneNumberInput
                            label="This has searchable option"
                            placeholder="Enter phone number"
                            allowClear={true}
                            enableSearch={true}
                            value={value2}
                            onChange={(value) => setValue2(value)}
                            onClear={handlClear2}
                        />
                        <Form.PhoneNumberInput
                            label="This is the disabled state"
                            disabled
                            placeholder="Enter phone number"
                            allowClear={true}
                        />
                        <Form.PhoneNumberInput
                            label="This is the readonly state"
                            placeholder="Enter phone number"
                            value={{ number: "91234567", countryCode: "+65" }}
                            allowClear={true}
                            readOnly
                        />
                        <Form.PhoneNumberInput
                            label="This is the error state"
                            errorMessage="Mobile number is required"
                            placeholder="Enter phone number"
                            allowClear={true}
                        />
                    </Container>
                </StoryContainer>
            );
        }}
    </Story>
</Canvas>

<Heading3>Using the field as a standalone</Heading3>

In the case that you require the phone number input field as a standalone, you can do this.

```tsx
import { PhoneNumberInput } from "@lifesg/react-design-system/phone-number-input";
```

<Preview>
    <Story name="Standalone usage">
        {() => {
            const [value, setValue] = useState({
                number: "",
                countryCode: "65",
            });
            const handlClear = () => {
                setValue((prevState) => {
                    return { ...prevState, number: "" };
                });
            };
            return (
                <StoryContainer>
                    <Container>
                        <PhoneNumberInput
                            label="This is the phone number input"
                            placeholder="Enter phone number"
                            allowClear={true}
                            enableSearch={true}
                            value={value}
                            onChange={(value) => setValue(value)}
                            onClear={handlClear}
                        />
                    </Container>
                </StoryContainer>
            );
        }}
    </Story>
</Preview>

<Secondary>Component API</Secondary>

<PropsTable />
