import { Canvas, Meta } from "@storybook/blocks";
import * as ImageButtonStories from "./image-button.stories";
import { PropsTable } from "./props-table";

<Meta of={ImageButtonStories} />

# Image Button

## Overview

A call to action component with an image and label.

```tsx
import { ImageButton } from "@lifesg/react-design-system/image-button";
```

<Canvas of={ImageButtonStories.Default} />

## Fallback

When the specified image fails to load, it is replaced by a fallback.

<Canvas of={ImageButtonStories.Fallback} />

## Flex behaviour

By default, the button shrinks to fit in a flex parent.

<Canvas of={ImageButtonStories.FlexBehaviour} />

## Accessibility

### Selection state

When `selected={true}`, the button appears in an active state. Set the
`aria-pressed` attribute to communicate the current selection state to screen
readers.

```tsx
<ImageButton selected={isSelected} aria-pressed={isSelected} imgSrc="...">
    Meeting Room
</ImageButton>
```

### Focus

By default, a disabled `<ImageButton>` cannot receive focus or events. In certain
modes across screen readers, it is excluded from the focus order, which can make
detecting its presence more difficult.

To keep the disabled button focusable, specify `focusableWhenDisabled`. The
`onClick` callback is not invoked when the user attempts to click on the ImageButton.

There are some caveats:

-   Other event listeners such as `onKeyDown`, `onTouchStart` remain triggered
-   `onClick` events still bubble to ancestors

<Canvas of={ImageButtonStories.FocusableWhenDisabled} />

For best results, check the `disabled` state in your application.

```tsx
const Page = () => {
    const [disabled, setDisabled] = useState(false);

    return (
        <div
            onClick={() => {
                if (disabled) return;
                // application logic here
            }}
        >
            <ImageButton
                disabled={disabled}
                focusableWhenDisabled
                imgSrc="https://cdn-icons-png.flaticon.com/512/4401/4401459.png"
            >
                Office Equipment
            </ImageButton>
        </div>
    );
};
```

## Component API

<PropsTable />
