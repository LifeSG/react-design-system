import { Meta, Story, Canvas, ArgsTable } from "@storybook/addon-docs";
import * as ScheduleStories from "./schedule.stories";
import { PropsTable } from "./props-table";

<Meta of={ScheduleStories} />

# Schedule

A comprehensive calendar component that supports day and week views with time slots for appointment scheduling and resource management.

## Usage

```jsx
import { Schedule } from "src/schedule";

<Schedule
    date="2025-07-22"
    data-id="schedule"
    view="day"
    minTime="00:00"
    maxTime="23:59"
    initialScrollTime="08:00"
    serviceData={data}
    loading={loading}
    onNextDayClick={onNextDayClick}
    onPreviousDayClick={onPreviousDayClick}
    onTodayClick={onTodayClick}
    onSlotClick={onSlotClick}
    onCalendarDateSelect={onCalendarDateSelect}
    emptySlotPopover={emptySlotPopover}
    blockedMessage="Not Available"
    onClickHiddenSlots={(hiddenServices) => {
        console.log("Hidden services:", hiddenServices);
    }}
/>;
```

## Examples

### Default Day View

<Canvas of={ScheduleStories.Default} />

### Week View

<Canvas of={ScheduleStories.WeekView} />

### Loading State

<Canvas of={ScheduleStories.Loading} />

### Empty State

<Canvas of={ScheduleStories.Empty} />

## Data Structure

The Schedule component expects data in the following format. For detailed prop descriptions, see the [Component API](#component-api) section below.

```typescript
interface ScheduleEntityProps {
    id?: string;
    name: string;
    slots: ScheduleSlotProps[];
}

interface ScheduleSlotProps {
    id?: string;
    date: string; // YYYY-MM-DD format
    startTime: string; // HH:mm format
    endTime: string; // HH:mm format
    status: "available" | "booked" | "blocked" | "pending";
    booked?: number; // Number of bookings
    capacity?: number; // Total capacity
    customPopover?: SchedulePopoverProps;
    onClick?: (data: ScheduleSlotProps, e: React.MouseEvent) => void;
}
```

## Week View Features

The week view provides advanced functionality for managing multiple services and overlapping time slots:

### Hidden Slots Management

When there are more than 3 services visible in a time cell, the overflow services are automatically hidden and represented by "+N" buttons:

-   **Single Button**: When all hidden services span the full 30-minute cell
-   **Multiple Buttons**: When hidden services have different 15-minute intervals within the cell
-   **Click Handler**: Use `onClickHiddenSlots` to handle clicks on "+N" buttons

## Responsive Behavior

On mobile and tablet devices:

-   Only day view is available
-   Today button is hidden
-   Navigation arrows appear for switching between services
-   Single service view with centered title and description

## Component API

<PropsTable />
